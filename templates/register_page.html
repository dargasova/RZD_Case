<!DOCTYPE html>
{% load static %}
<html lang="en" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Регистрация</title>
    <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/album/">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap-icons.css">
    <link href="{% static 'bootstrap/css/carousel.css' %}" rel="stylesheet">
    <link href="{% static 'bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'bootstrap/css/headers.css' %}" rel="stylesheet">
    <link href="{% static 'bootstrap/css/features.css' %}" rel="stylesheet">
    <link href="{% static 'bootstrap/css/badges.css' %}" rel="stylesheet">
    <link href="{% static 'bootstrap/css/product.css' %}" rel="stylesheet">
    <link href="{% static 'bootstrap/css/pricing.css' %}" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Google fonts-->
    <link rel="preconnect" href="https://fonts.gstatic.com/">
    <link href="https://fonts.googleapis.com/css2?family=Newsreader:ital,wght@0,600;1,600&display=swap"
          rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Mulish:ital,wght@0,300;0,500;0,600;0,700;1,300;1,500;1,600;1,700&display=swap"
          rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,400;1,400&display=swap" rel="stylesheet">
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="{% static 'bootstrap/css/styles.css' %}" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/inputmask/5.0.6/jquery.inputmask.min.js"></script>
</head>
<body class="img js-fullheight"
      style="background-image: url('{% static 'bootstrap/img/p-fon.jpg' %}'); background-size: cover; height: 100%; overflow: hidden;">

<div class="container position-absolute top-0 start-0 mt-3 ms-3">
    <a id="backButton" href="{% url 'start_page' %}" class="btn btn-danger">
        <i class="bi bi-arrow-left"></i> Назад
    </a>
</div>

<div class="container" style="margin-top: 100px; text-align: center; height: 100vh; overflow: hidden;">
    <!-- Добавляем стили здесь -->
    <div class="row justify-content-center">
        <div class="col-md-6 text-center mb-5">
            <h2 class="heading-section"
                style="color: white; font-size: 3.5em; font-family: 'Kanit', sans-serif; font-weight: bold;">
                Регистрация</h2>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="col-md-6 col-lg-4">
            <div class="login-wrap p-0" style="margin-top: -18px;">
                <h3 class="mb-4 text-center"
                    style="color: white; font-size: 1.7em; font-family: 'Kanit', sans-serif; font-weight: regular;">
                    Создать аккаунт?</h3>
                <form id="add_form" method="post">
                    {% csrf_token %}
                    <div class="form-group mb-3">
                        <input type="text" class="form-control form-control-lg w-100"
                               name="username" placeholder="{{ form.username.label }}" required>
                    </div>
                    <div class="form-group mb-3">
                        <input id="password-field" type="password" class="form-control form-control-lg w-100"
                               name="password" placeholder="{{ form.password.label }}" required>
                    </div>
                    <div class="form-group mb-3">
                        <button form="add_form" type="submit" class="btn btn-danger btn-lg w-100">
                            Добавить
                        </button>
                    </div>
                    <div class="form-group">
                        <div class="form-group" style="color: white; text-align: left;">
                            <label>
                                <input type="checkbox" checked> Запомнить меня
                            </label>
                        </div>
                    </div>
                </form>
                <!-- Уведомление об ошибке -->
                <div id="error-notification" style="color: red; font-weight: bold; text-align: left; display: none;">
                    Не более 150 символов. Можно использовать только буквы, цифры и символы @/./+/-/_
                </div>

            </div>
        </div>
    </div>
</div>

<!-- Include JavaScript dependencies here -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="{% static 'bootstrap/js/bootstrap.min.js' %}"></script>
<script src="{% static 'bootstrap/js/scripts.js' %}"></script>
<script src="{% static 'bootstrap/js/jquery.min.js' %}"></script>
<script src="{% static 'bootstrap/js/popper.js' %}"></script>
<script src="{% static 'bootstrap/js/bootstrap.min.js' %}"></script>
<script src="{% static 'bootstrap/js/main.js' %}"></script>

<script>
document.getElementById("add_form").addEventListener("submit", function (event) {
    var username = document.querySelector("#add_form input[name='username']").value;
    var password = document.querySelector("#password-field").value;

    // Проверка на допустимые символы и максимальную длину
    var validCharacters = /^[a-zA-Z0-9@/./+/-/_]+$/;
    if (!validCharacters.test(password) || password.length > 150) {
        // Отображение уведомления
        var notification = document.getElementById("error-notification");
        notification.style.border = "none"; // Убираем рамку
        notification.style.display = "block";

        // Остановка отправки формы
        event.preventDefault();
    }
});

// Получаем URL предыдущей страницы
var previousPageUrl = document.referrer;

// Находим кнопку "Назад" по её ID
var backButton = document.getElementById("backButton");

// Устанавливаем атрибут href для кнопки "Назад" равным URL предыдущей страницы
backButton.href = previousPageUrl;

</script>

</body>
</html>
